<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1"><title>Kiyeon&#39;s Blog</title><link rel=stylesheet type=text/css href=/css/ybasic.css><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atelier-heath-dark.min.css><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/dos.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/lisp.min.js></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class=content><h1 class=title title="December 12, 2017 10:46:46">CRLF</h1><nav id=TableOfContents><ul><li><a href=#운영체제별-줄바꿈-문자>운영체제별 줄바꿈 문자</a></li><li><a href=#crlf-충돌>CRLF 충돌</a></li><li><a href=#crlf-수정>CRLF 수정</a><ul><li><a href=#git>GIT</a></li><li><a href=#vim-cli>VIM &amp; CLI</a><ul><li><a href=#문자치환>문자치환</a></li><li><a href=#파일포맷-변경>파일포맷 변경</a></li><li><a href=#cli로-변경>CLI로 변경</a></li></ul></li><li><a href=#jetbrains-ides>JetBrains IDEs</a></li></ul></li><li><a href=#referecnes>Referecnes</a></li></ul></nav><p>CRLF는 <a href=https://ko.wikipedia.org/wiki/%EC%83%88%EC%A4%84_%EB%AC%B8%EC%9E%90>새줄 문자</a>를 말한다. New Line, Line Break, Line Separators, EOL(End-Of-Line)라고도 한다.</p><p><strong>CR(Carrige Return)</strong></p><ul><li>현재 라인에서 캐리지(커서)를 제일 앞으로 이동하는 동작</li><li>아스키(13, 0x0D), \r</li></ul><p><strong>LF(Line Feed)</strong></p><ul><li>종이를 한 라인 위로 올리는 동작</li><li>아스키(10, 0x0A), \n</li></ul><h1 id=운영체제별-줄바꿈-문자>운영체제별 줄바꿈 문자</h1><p>OS별로 줄바꿈 문자가 다르다.</p><blockquote><p>역사<br>ISO와 ASA(ANSI의 전신)는 동시에 ASCII를 개발했다. 1963년부터 1968년까지 ISO 초안은 CR+LF와 LF를 새줄 문자로 정했다. ASA의 초안은 CR+LF만 지원했다. CR+LF는 텔레타이프, ASR33을 콘솔 장치로 사용한 초기 컴퓨터 시스템에서 널리 쓰였다.</p><p><strong>텔레타이프의 프린터가 다음 줄의 처음부터 인쇄하기 위해서는 두 글자를 인쇄하는 시간이 필요했다.</strong> 텔레타이프는 텍스트의 한 글자를 같은 시간 간격으로만 프린터로 전송할 수 있었다. <strong>프린터에서 좌우로 움직이는 장치가 캐리지(carriage)</strong>였는데 <strong>이것이 오른쪽 끝에서 왼쪽 끝으로 이동하는 시간이 두 글자 인쇄하는 만큼 걸렸다.</strong> 새줄 문자로 코드 하나만 쓸 경우 다른 한 글자를 인쇄할 수 없었다. 그래서 <strong>텔레타이프를 쓰던 시절에는 CR+LF 두 코드를 새줄 문자로 썼다.</strong> 캐리지 리턴이 먼저 전송되었다. 그리고 종이를 한 줄 옮기는 라인 피드가 이어서 전송되었다. 좌우 여백이 줄어들면 캐리지가 이동하는 시간이 더 필요하므로 CR이나 NUL을 더 채워 넣어야 할 때도 있었다.</p><p><strong>컴퓨터가 막 탄생하던 시절에는 디스크와 메모리가 비쌌기 때문에</strong> 1964년에 나온 운영 체제 멀틱스는 <strong>새줄 문자를 LF 하나로 통일</strong>했다. <strong>유닉스도 멀틱스의 새줄 문자 관례를 이어받았고 리눅스도 이 방식을 쓰고 있다.</strong></p><p>1981년에 등장한 MS-DOS는 CP/M의 CR+LF 방식을 따랐다. CP/M은 시리얼 라인으로 터미널을 연결했기 때문에 화면 전환 속도가 느렸다. 느린 터미널에서 줄바꿈이 있을 때 스크롤 하는 시간과 보조를 맞추기 위해 CR+LF 방식을 쓰는 것이 자연스러웠다. 윈도도 이 관례를 따르고 있다. - <a href=https://ko.wikipedia.org/wiki/%EC%83%88%EC%A4%84_%EB%AC%B8%EC%9E%90>위키피디아</a></p></blockquote><ul><li>Windows : CRLF(\r\n)</li><li>*nix and macOS : LF(\n)</li><li>Classic Mac : CR(\r)</li></ul><h1 id=crlf-충돌>CRLF 충돌</h1><p>한 시스템만을 사용한다면 문제없겠지만 타기종간에 파일을 주고받을때 문제가 발생한다.</p><ul><li>줄바꿈이 제대로 표현되지 않아 다닥다닥 붙는다</li><li>EOL에 특수문자(^M)가 표시된다</li></ul><p>가장 빈번한 케이스는 어떤 프로젝트를 공동으로 진행할때 어떤 개발자는 윈도우시스템을 사용하고 어떤 개발자는 맥이나 리눅스를 사용할때 같은 파일을 수정하면 줄바꿈문자의 충돌이 발생한다.</p><p>요즘 많은 IDE나 에디터들이 자동으로 시스템간 줄바꿈문자를 인삭하여 렌더링해주므로 그닥 신경쓰이지는 않지만 아무 작업도 안했는데 단지 줄바꿈으로 인해 코드가 변경되어 코드가 업데이트된다면 이력관리에 좋지 않을 것이다. 그러므로 CRLF든 LF든 하나로 통일하여 사용하는것이 좋다.<sup class=footnote-ref id=fnref:1><a rel=footnote href=#fn:1>1</a></sup></p><p>LF포맷을 윈도우에서 보면 아래와 같이 제대로 줄바꿈이 표시되지 않는다.<br><img src="/files/20180226/Screen Shot 2018-02-26 at 17.08.18.png"></p><p>LF와 CRLF가 섞인 파일을 vim에서 보면 <strong>^M</strong>이 보인다.<br><img src="/files/20180226/Screen Shot 2018-02-26 at 17.22.57.png"></p><h1 id=crlf-수정>CRLF 수정</h1><p>CRLF를 LF로 수정하거나 LF를 CRLF로 수정하는 방법은 다양하다 그중 몇가지 알아봤다.</p><h2 id=git>GIT</h2><p>위에서도 언급했듯 CRLF의 충돌이 가장 많이 발생하는 케이스는 버전관리일것이다. <a href=https://git-scm.com/book/ko/v1/Git%EB%A7%9E%EC%B6%A4-Git-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0#소스-포맷과-공백>GIT은 CRLF를 통일하여 사용할 수 있도록 옵션을 제공한다.</a></p><p><strong>core.eof</strong> 이 옵션은 CRLF나 LF 둘중 하나를 강제할 수 있다.</p><ul><li>native : 기본설정으로 시스템의 Line Ending처리 방법을 따른다.</li><li>crlf : CRLF를 Line Ending으로 사용</li><li>lf : LF를 line ending으로 사용</li></ul><p><strong>core.autocrlf</strong></p><ul><li>true(windows용) : commit할때 CRLF를 LF를 변환하고 checkout할때 LF를 CRLF로 변환한다.</li><li>input(*nix용) : commit할때만 CRLF를 LF로 변환한다.</li><li>false : autocrlf 미사용</li></ul><p><strong>.gitattributes</strong><br>Git은 <a href="https://www.lesstif.com/pages/viewpage.action?pageId=20776404">.gitattributes를 통해 특정 패턴의 파일들에 대해 crlf를 처리하도록 할 수 있다.</a> .gitignore와 비슷하게 저장소에 공유하면 core옵션설정을 하지 않아도 저장소 공유멤버에게 동일하게 적용되는 장점이 있다.</p><p>단, 주의할점은 공식 Git 클라이언트외에 다른 Git 클라이언트에서 위 옵션들을 체크하지 않을 수 있으므로 해당 옵션을 사용할 것이라면 현재 사용중인 클라이언트에서 지원하지는 점검이 필요하다.</p><h2 id=vim-cli>VIM &amp; CLI</h2><h3 id=문자치환>문자치환</h3><p>vim에서 텍스트파일을 열어보면 라인끝에 <strong>^M</strong>이 보일때가 있다. 시스템간 줄바꿈문자가 섞여서 발생하는 현상인데 문자치환으로 삭제할 수 있다. 아래는 다음과 같이 입력할 결과다. <code>:1,$s/Ctrl+v+m//g</code></p><pre><code class=language-shell>:1,$s/^M//g
</code></pre><h3 id=파일포맷-변경>파일포맷 변경</h3><p><code>:set fileformat=unix</code> 또는 <code>:set ff=unix</code>로 파일포맷을 변경하고 저장한다. 반대로 Windows의 줄바꿈문자(crlf)를 붙이려면 <code>:set fileformat=dos</code></p><h3 id=cli로-변경>CLI로 변경</h3><pre><code class=language-shell>$ dos2unix &lt; dosfile &gt; unixfile
$ unix2dos &lt; unixfile &gt; dosfile
$ sed 's/'`echo &quot;\015&quot;`'//g' file &gt; filenew  # ^M is ascii 15
$ tr -d &quot;\015\032&quot; &lt; dosfile &gt; unixfile # 015 is CR, 032 is Ctrl-Z
$ cat dos-file | tr -d ^M &gt; unixfile
$ perl -i -pe 's/\015//g' *.html
</code></pre><h2 id=jetbrains-ides>JetBrains IDEs</h2><p>메뉴바 또는 화면하단 상태바에 EOL을 설정할 수 있는 메뉴가 있다. CRLF를 DOS 또는 Windows모드, LF를 UNIX 모드로 표시한다. <img src=/files/20180226/jetbrain_crlf2.png><br><img src=/files/20180226/jetbrain_crlf.png></p><h1 id=referecnes>Referecnes</h1><ul><li><a href="http://blog.naver.com/PostView.nhn?blogId=pthread_join&amp;logNo=220720777376&amp;beginTime=0&amp;jumpingVid=&amp;from=search&amp;redirect=Log&amp;widgetTypeCall=true">CRLF란 무엇일까</a></li><li><a href=https://www.jetbrains.com/help/phpstorm/2016.3/configuring-line-separators.html>PHPStorm Line Separtors 설정방법</a></li><li><a href=http://handam.tistory.com/127>Git 설정 CRLF, LF</a></li></ul><div class=footnotes><hr><ol><li id=fn:1>오픈소스진영에서는 많은 프로젝트에서 LF를 사용하는 경우가 많다. <a class=footnote-return href=#fnref:1><sup>[return]</sup></a></li></ol></div><div id=disqus_thread></div><script type=text/javascript>
        (function() {
            
            
            if (window.location.hostname == "localhost")
                return;

            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            var disqus_shortname = 'kiyeon';
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href="http://disqus.com/" class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><footer>Kiyeon&#39;s Blog</footer><script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-79101-12', 'auto');
    ga('send', 'pageview');

</script></body></html>